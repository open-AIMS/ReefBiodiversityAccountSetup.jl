var documenterSearchIndex = {"docs":
[{"location":"#ReefBiodiversityAccountSetup.jl-Documentation","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"","category":"page"},{"location":"#Installation","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Installation","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Download the package using the Julia package installer,","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"pkg> add ReefBiodiversityAccountSetup","category":"page"},{"location":"#Introduction","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Introduction","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"ReefBiodiversityAccountSetup supports spatial analysis and visualisation to inform the setup of a Reef Biodiversity Account using open access data layers from the Allen Coral Atlas (https://www.allencoralatlas.org/) and NOAA databases (https://coralreefwatch.noaa.gov/satellite/index.php).","category":"page"},{"location":"#Configuration-file","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Configuration file","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"A \"config.toml\" file needs to be added to the project root to facilitate access to key data files. The structure of the TOML is as follows:","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"[bathy_data]\nallen_bathy = \"Path to Allen Atlas bathymetric data as a .tif\"\ngbrmpa_bathy = \"Path to GBRMPA bathymetric data if this is being used (for GBR only)\"\n\n[spatial_data]\nallen_spatial = \"Path to the Allen Atlas region data set (benthic and geomorphic data as gpkgs)\"\ngbrmpa_region = \"If using GBRMPA data for the GBR, the GBRMPA region gpkg path can be added here\"\n\n[dhw_data]\nnoaa_dhw = \"Path to NOAA DHW netcdfs\"\n\n[other_data]\nallen_turbid = \"Path to other key Allen Atlas datasets, such as turbidity data\"","category":"page"},{"location":"#Downloading-data","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Downloading data","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"To assess a range of reef areas as potential account areas, one of the Allen Atlas region maps can first be downloaded, by selecting a region from the \"Mapped/Monitored Areas\" tab on the Atlas main page and clicking the download icon:","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas regional data download)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"An account with the Allen Coral Atlas must be made to do this and the downloaded data will be sent via the account's associated email. This dataset will contain geomorphic and benthic data for a reef region, such as the Great Barrier Reef and Torres Strait.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"To plot some initial maps of the region, the dataset file path should be added to the config file under [spatial data], allen_spatial. To add additional datasets such as bathymetry or turbidity data, an account domain must be selected using the drawing tool:","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas domain download)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Additional downloaded dataset paths should also be added to the config.toml file. The path for bathymetry data should be added under [bathy data], allen_bathy, and any other data paths such as turbidity data can be added under [other_data].","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Once a domain has been selected, named and saved, various data layers can be selected and downloaded from the \"My Areas\" tab: (Image: Allen Atlas download domain files)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Selected domains can then be saved under a name for future downloads and analysis:","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas save domain)","category":"page"},{"location":"#Exploring-a-dataset","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Exploring a dataset","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Datasets downloaded from the Allen Atlas can first be explored through visualisations before settling on a project domain. Geomorphic and benthic zone plots may be of interest in assessing available space for coral habitat and habitat suitability for planned management and intervention acitivities.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Geomorphic and bethic zone data, as well as the reef extent, can be loaded using spatial_analysis.load_spatial_base(config_file), where config_file is the path to a config file as described in the \"Configuration file\" section. Make sure any downloaded benthic or geomorphic data is saved as a geopackage:","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas set download as geopackage)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Latitudinal and longitudinal limits for the region of interest can be set using spatial_analysis.get_geo_within_box().","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    import GeoDataFrames as GDF\n    using GLMakie, GeoMakie, GraphMakie\n    import ReefBiodiversityAccountSetup as RBAS\n\n    config_file = RBAS.spatial_analysis.load_config(; config_path=\"../config.toml\")\n\n    benthic, geomorphic, reef_extent = RBAS.spatial_analysis.load_spatial_base(config_file)\n\n    # Set box limits for loading account data\n    box_upper = (-16.75284, 146.15641)\n    box_lower = (-16.95082, 146.32396)\n\n    # Get benthic and geomorphic data within the account box\n    benthic = RBAS.spatial_analysis.get_geo_within_box(benthic, box_upper, box_lower)\n    geomorphic = RBAS.spatial_analysis.get_geo_within_box(geomorphic, box_upper, box_lower)\n    extent = RBAS.spatial_analysis.get_geo_within_box(reef_extent, box_upper, box_lower)\n\n    # Plot benthic and geomorphic data\n    fig_benthic = RBAS.plotting.spatial_map(\n        benthic,\n        benthic[:, :class];\n        opts=Dict(:legend_name => \"Benthic map\",\n            :color_map => :Accent_5)\n    )\n    fig_geomorphic = RBAS.plotting.spatial_map(\n        geomorphic,\n        geomorphic[:, :class];\n        opts=Dict(:legend_name => \"Geomorphic map\",\n            :color_map => :hawaii10)\n    )","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas benthic data) (Image: Allen Atlas geomorphic data)","category":"page"},{"location":"#Deriving-benthic-categories-which-may-support-coral-habitat","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Deriving benthic categories which may support coral habitat","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Estimated area which can support coral can be visualised by filtering the benthic data for the Coral/Algal/Rock categories (the accuracy of this estimation varies, as described in the Allen Atlas documentation included in the data download files). Deriving the intersection of the geomorphic and benthic data polygons using spatial_analysis.multipoly_geom_intersection() can speed up further analysis as this finds a smaller set of polygons of unique benthic/ggeomorphic categories which intersect with the reef extent polygons.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"The following finds the polygons in the Coral/Algal/Rock categories and plots these as a map to show potential reef habitat which may support coral.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    # Filter for Coral/Algae type\n    benthic_filtered = RBAS.spatial_analysis.filter_site_area(benthic)\n\n    # Get intersection of benthic filtered polygons and account extent to reduce number of polygons\n    benthic_ext = RBAS.spatial_analysis.multipoly_geom_intersection(\n        extent, benthic_filtered, :class\n    )\n\n    fig_benthic_filtered = RBAS.plotting.spatial_map(\n        benthic_ext,\n        benthic_ext[:, :class];\n        opts=Dict(:legend_name => \"Coral/Rock substrate\",\n            :color_map => :tab10)\n    )","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas benthic data filtered)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"This process can also beused to plot the geomorphic categories of areas in the Coral/Algal/Rock categories, allowing visualisation of the key geomorphic categories of reef area which may provide coral habitat.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    # Get intersection of geomorphic polygons and account extent to reduce the number of polygons\n    geomorphic_ext = RBAS.spatial_analysis.multipoly_geom_intersection(\n        extent, geomorphic, :class\n    )\n\n    # Get intersection of benthic filtered polygons and geomorphic polygons\n    geomorphic_benthic_comb = RBAS.spatial_analysis.multipoly_geom_intersection(\n        benthic_ext, geomorphic_ext, :class\n    )\n\n    fig_geomorphic_ext = RBAS.plotting.spatial_map(\n        geomorphic_ext,\n        geomorphic_ext[:, :class];\n        opts=Dict(:legend_name => \"Geomorphic class\",\n            :color_map => :hawaii10)\n    )\n\n    fig_geomorphic_filtered = RBAS.plotting.spatial_map(\n        geomorphic_benthic_comb,\n        geomorphic_benthic_comb[:, :class];\n        opts=Dict(:legend_name => \"Geomorphic categories of Coral/Rock substrate\",\n            :color_map => :hawaii10)\n    )\n","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas geomorphic data filtered)","category":"page"},{"location":"#Deriving-other-environmental-variable-maps","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Deriving other environmental variable maps","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Other environmental variables and their spatial variation can be plotted as zonal statistics across the derived spatial polygons for the area of interest. Median depth, for example, can be derived from the Allen Atlas datasets.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    # Extract depths from raster file\n    geomorphic_filtered, depths = RBAS.spatial_analysis.median_features_allen(\n        geomorphic_filtered, config_file; is_depth=true\n    )\n\n    # Plot depths\n    fig_depth = RBAS.plotting.spatial_map(\n        geomorphic_filtered,\n        geomorphic_filtered[:, :depth_med];\n        opts=Dict(:colorbar_label => \"Median depth\",\n            :color_map => :lighttest)\n    )","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas depth)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"Another key quantity in understanding coral vulnerability to heat stress is Degree Heating Weeks. This information can be derived fromt the NOAA Reef Watch database (https://coralreefwatch.noaa.gov/satellite/index.php) and zonally aggregated to visualise broadscale estimates of heat stress.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    # Extract broadscale NOAA DHWs\n    geomorphic_filtered, dhws = RBAS.spatial_analysis.noaa_dhw_means(geomorphic_filtered, config_file)\n\n    # Plot mean and std for dhws\n    fig_dhw_mean = RBAS.plotting.spatial_map(\n        geomorphic_filtered,\n        geomorphic_filtered[:, :dhw_hist_mean];\n        opts=Dict(:colorbar_label => \"Mean max dhw\",\n            :color_map => :lighttest)\n    )\n    fig_dhw_std = RBAS.plotting.spatial_map(\n        geomorphic_filtered,\n        geomorphic_filtered[:, :dhw_hist_sd];\n        opts=Dict(:colorbar_label => \"Std max dhw\",\n            :color_map => :lighttest)\n    )\n","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas dhws filtered)","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"The Allen Atlas datasets can also be downloaded with several key environmental variables, such as turbidity. These can also be zonally aggregated and plotted.","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"\n    # Allen atlas turbidity data\n    turb_fn = config_file[\"other_data\"][\"allen_turbid\"]\n\n    # Add turbidity data from Allen Atlas\n    geomorphic_filtered, turbidity = RBAS.spatial_analysis.median_features_allen(\n        geomorphic_filtered, turb_fn; data_name=:turb_med\n    )\n\n    fig_turb_med = RBAS.plotting.spatial_map(\n        geomorphic_filtered,\n        geomorphic_filtered[:, :turb_med];\n        opts=Dict(:colorbar_label => \"Turbidity mean\",\n            :color_map => :lighttest)\n    )","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"(Image: Allen Atlas turbs filtered)","category":"page"},{"location":"#Selecting-project-and-control-sites","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"Selecting project and control sites","text":"","category":"section"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    # Plot impact site rating\n    impact_site_ratings = RBAS.spatial_analysis.suggest_impact_sites(geomorphic_filtered; sorted=false)\n\n    fig_impact= RBAS.plotting.spatial_map(\n        geomorphic_filtered[:, impact_site_rating[:, :Index]],\n        impact_site_rating[:, :Rating];\n        opts=Dict(:colorbar_label => \"Impact site rating\",\n            :color_map => :lighttest)\n    )","category":"page"},{"location":"","page":"ReefBiodiversityAccountSetup.jl Documentation","title":"ReefBiodiversityAccountSetup.jl Documentation","text":"    geomorphic_filtered[!, :ID] = collect(1:size(geomorphic_filtered,1))\n    # Suggest control sites for a particular impact site (e.g. 5)\n    control_site_ratings = RBAS.spatial_analysis.suggest_control_sites(5, geomorphic_filtered[:,Not(:geom)], [:class]; ID_COLUMN=:ID)\n\n    fig = spatial_map(geomorphic_filtered[:, control_site_rating[:, :Index]],\n        control_site_rating[:, :Similarity],\n        opts=Dict(:colorbar_label => \"Control site similarity for site 5\", :color_map => :lightest))\n","category":"page"},{"location":"API/#ReefBiodiversityAccountSetup-API","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup API","text":"","category":"section"},{"location":"API/#Spatial-Analysis","page":"ReefBiodiversityAccountSetup API","title":"Spatial Analysis","text":"","category":"section"},{"location":"API/","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup API","text":"Modules = [ReefBiodiversityAccountSetup.spatial_analysis]\nOrder   = [:constant, :function, :type]\nPrivate = true","category":"page"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.filter_site_area-Tuple{DataFrames.DataFrame}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.filter_site_area","text":"filter_site_area(df::DataFrame)::DataFrame\n\nFilter benthic data to only include polygons suitable for coral growth.\n\nArguments\n\ndf : spatial data include benthic class column\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.get_depths-Tuple{DataFrames.DataFrame, Dict}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.get_depths","text":"get_depths(reef_gdf::DataFrame, config_file::Dict; temporary_gpkg_name::String=\"spatial_data_temp.gpkg\",)::Tuple{DataFrame,Array}\nget_depths(reef_gdf::DataFrame, gbrmpa_region_path::String, gbrmpa_bathy_path::String; temporary_gpkg_name::String=\"spatial_data_temp.gpkg\",)::Tuple{DataFrame,Array}\n\nGet depths using data sourced from GBRMPA.\n\nArguments\n\nconfig_file : Dict of key filenames loaded from a \"config.toml file\"\nbathy_data_dir : Directory for GBRMPA bathymetry data\ntemporary_gpkg_name : Filename for temporary geopackage file saved in any previous steps.\nregion_path : Location of file containing regional GBRMPA spatial data.\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.get_geo_within_box-Tuple{DataFrames.DataFrame, Tuple, Tuple}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.get_geo_within_box","text":"get_geo_within_box(geo_data::DataFrame, box_upper::Tuple, box_lower::Tuple)::DataFrame\n\nGet geo_data within specified bounding box.\n\nArguments\n\ngeo_data : GeoDataFrame\nbox_upper : Upper coordinates for bounding box\nbox_lower : Lowert coordinates for bounding box\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.get_geomorphology_coral_area-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.get_geomorphology_coral_area","text":"get_geomorphology_coral_area(df_1::DataFrame, df_2::DataFrame)::DataFrame\n\nEquivalent to a spatial join for df1 and df2, where the operation is intersection.\n\nArguments\n\ndf_1 : Inner dataframe\ndf_2 : Outer dataframe\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.get_multipoly_area-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.get_multipoly_area","text":"get_multipoly_area(outer_gdf::DataFrame, inner_gdf::DataFrame)\n\nFind the area of inner_gdf intersecting with outer_gdf.\n\nArguments\n\nouter_gdf : Outer dataframe\ninner_gdf : Inner dataframe\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.load_spatial_base-Tuple{Dict}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.load_spatial_base","text":"load_spatial_base(config_file::Dict)\n\nLoads key spatial data layers from an Allen Atlas dataset (benthic, geomorphic and extent (experimental)).\n\nReturns\n\nbenthic : Dataframe of polygons and their benthic classes\ngeomorphic : Dataframe of polygons and their geomorphic classes\nreef_extent : Dataframe of polygons showing reef extent (experiemental product in the Allen Atlas)\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.median_features_allen-Tuple{DataFrames.DataFrame, Dict}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.median_features_allen","text":"median_features_allen(reef_gdf::DataFrame, config_file::Dict; temporary_gpkg_name::String=\"spatial_data_temp.gpkg\", data_name::Symbol=:depth_med, is_depth=false)::Tuple{DataFrame,Array}\nmedian_features_allen(reef_gdf::DataFrame, allen_bathy_filepath::String; temporary_gpkg_name::String=\"spatial_data_temp.gpkg\", data_name::Symbol=:depth_med, is_depth=false)::Tuple{DataFrame,Array}\n\nGet median values of an Allen Atlas Raster over a set of geometries\n\nArguments\n\nconfig_file : Dict of key filenames loaded from a \"config.toml file\"\nreef_gdf : Current reef geodataframe to augment\nallen_dir : Directory for Allen Atlas Raster data (net cdf or tif)\ntemporary_gpkg_name : Filename for temporary geopackage file saved in any previous steps\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.multipoly_geom_intersection-Tuple{DataFrames.DataFrame, DataFrames.DataFrame, Union{String, Symbol}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.multipoly_geom_intersection","text":"multipoly_geom_intersection(outer_gdf::DataFrame, inner_gdf::DataFrame, classes::Union{String,Symbol})\n\nFind the intersections of outer_gdf with each poly in inner_gdf and combine to create new set of geometries with unique classes in inner_gdf.\n\nArguments\n\nouter_gdf : Outer dataframe\ninner_gdf : Inner dataframe\nclasses : Vector giving the unique class of each polygon in inner_gdf\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.multipoly_geom_within-Tuple{DataFrames.DataFrame, DataFrames.DataFrame, Union{String, Symbol}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.multipoly_geom_within","text":"multipoly_geom_within(outer_gdf::DataFrame, inner_gdf::DataFrame, classes::Union{String,Symbol})\n\nCombine multipolygons in outer_gdf of a particular class which sit inside the polygons of inner_gdf\n\nArguments\n\nouter_gdf : Outer dataframe\ninner_gdf : Inner dataframe\nclasses : Vector giving the unique class of each polygon in inner_gdf\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.noaa_dhw_means-Tuple{DataFrames.DataFrame, Dict}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.noaa_dhw_means","text":"noaa_dhw_means(reef_gdf::DataFrame, config_file::Dict; temporary_gpkg_name::String=\"geomorph_temp.gpkg\")::Tuple{DataFrame,YAXArray}\nnoaa_dhw_means(reef_gdf::DataFrame, dhw_filepath::String; temporary_gpkg_name::String=\"geomorph_temp.gpkg\")::Tuple{DataFrame,YAXArray}\n\nGet zonal mean values of the NOAA DHW product over a set of geometries in a geopackage.\n\nArguments\n\nconfig_file : Dict of key filenames loaded from a \"config.toml file\"\nreef_gdf : Reef geodataframe to augment\ndhw_fn : Directory for NOAA DHW product data\ntemporary_gpkg_name : Filename for temporary geopackage file saved in any previous steps.\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.normalize-Tuple{Any}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.normalize","text":"normalize(x)\n\nMin-max normalisation of a vector\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.set_reef_k-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.set_reef_k","text":"set_reef_k(geomorphic_gdf::DataFrame, benthic_gdf::DataFrame; storage_string::String=\"spatial_data_temp.gpkg\", threshold_k::Float64=0.05)\n\nSet the proportional k area and total site area for the set of polygons in reef_gdf, given a set of k areas     (calculated using get_multipoly_area).\n\nArguments\n\ngeomorphic_gdf : geomorphic classes and polygons.\nbenthic_gdf : benthic classes and polygons.\nstorage_string : filename for temporary file saving to allow coordinate transforms and other manipulations.\nthreshold_k : threshold for k below which polygons are filtered out\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.suggest_control_sites-Tuple{Int64, DataFrames.DataFrame, Union{Vector{String}, Vector{Symbol}}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.suggest_control_sites","text":"suggest_control_sites(impact_site_id::Int64, site_data::DataFrame, category_constraints::Union{Vector{Symbol},Vector{String}}; weightings::Vector{Float64}=ones(size(site_data, 2) - (1 + length(category_constraints))), ID_COLUMN::Union{String,Symbol}=:reef_siteid, distance_func=chebyshev)::DataFrame\n\nOutput ordered list of sites which are similar to impact site. Similarity measured by normalised Chebyshev distance (or distance_func where included).\n\nArguments\n\nimpact_site_id : Id of site to be used to implement activities at.\nsite_data : Data to be used to judge similarity to impact site.\ncategory_constraints : List of column names in site_data which are categories that the   impact and control sites must both sit within.\nweightings : Weightings for the similarity criteria, to weight importance in control site selection.   Default is equal weighting (all 1.0).\nID_COLUMN : Column in site_data which is the unique identifier for sites.\ndistance_func : A distance function used to judge \"similarity\".\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.spatial_analysis.suggest_impact_sites-Tuple{DataFrames.DataFrame, Vector{String}, Matrix{Float64}, String}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.spatial_analysis.suggest_impact_sites","text":"suggest_impact_sites(site_data::DataFrame; min_site_karea::Float64=1000.0, sorted=true)::DataFrame\n\nCalculate measure of suitable sites for implementing activities given a set of spatial data\n\nArguments\n\nsite_data : Spatial dataset including geomorphic classes for each site.\nmin_site_karea : Minimum acceptable k area for sites to implement on.\nsorted : true is output should be sorted from best to worst (don't use if using to plot map)\n\n\n\n\n\n","category":"method"},{"location":"API/#Plotting","page":"ReefBiodiversityAccountSetup API","title":"Plotting","text":"","category":"section"},{"location":"API/","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup API","text":"Modules = [ReefBiodiversityAccountSetup.plotting]\nOrder   = [:constant, :function, :type]\nPrivate = true","category":"page"},{"location":"API/#ReefBiodiversityAccountSetup.plotting.set_axis_defaults-Tuple{Dict{Any, Any}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.plotting.set_axis_defaults","text":"set_axis_defaults(axis_opts::Dict{Any,Any})::Dict{Symbol,Any}\n\nSet default axis settings for spatial figures\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.plotting.set_figure_defaults-Tuple{Dict{Any, Any}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.plotting.set_figure_defaults","text":"set_figure_defaults(fig_opts::Dict{Any,Any})::Dict{Symbol,Any}\n\nSet default figure settings for spatial figures\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.plotting.spatial_map-Tuple{DataFrames.DataFrame, Vector{String}}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.plotting.spatial_map","text":"spatial_map(geo_df::DataFrame, color_vec::Vector{String}; fig_opts::Dict{Symbol,Any}=set_figure_defaults(Dict()), axis_opts::Dict{Symbol,Any}=set_axis_defaults(Dict()), opts::Dict{Symbol,Any}=Dict())::Figure\nspatial_map(f::Figure, geo_df::DataFrame, color_vec::Vector{String}; axis_opts::Dict{Symbol,Any}=set_axis_defaults(Dict()), opts::Dict{Symbol,Any}=Dict())::Figure\nspatial_map(geo_df::DataFrame, color_vec::Union{Vector{Float32},Vector{Float64}}; axis_opts=Dict{Symbol,Any}=set_axis_defaults(Dict()), opts::Dict{Symbol,Any}=Dict())::Figure\nspatial_map(f::Figure, geo_df::DataFrame, color_vec::Union{Vector{Float32},Vector{Float64}}; axis_opts::Dict{Symbol,Any}=set_axis_defaults(Dict()), opts::Dict{Symbol,Any}=Dict())::Figure\n\nPlots a spatial heat map using a color vector of floats (for a continuous mapping) or a color vector of strings (for categorical mapping)\n\nArguments\n\ngeo_df : GeoDataFrame containing geometries to be plotted\ncolor_vec : Vector of values of length of geo_df\nopts : Aviz options\nlegend_name : name for legend showing categories and their colors\ncolorbar_label : name for colorbar showing color range\ncolor_map : discretized colormap for categories or continuous for heatmaps\ncolor_range : Numerical limits for continuous colorbar\naxis_opts : Additional options to pass to adjust Axis attributes See: https://docs.makie.org/v0.19/api/index.html#Axis\n\n\n\n\n\n","category":"method"},{"location":"API/#ReefBiodiversityAccountSetup.plotting.temporal_spread-Tuple{Makie.Figure, YAXArrays.Cubes.YAXArray}","page":"ReefBiodiversityAccountSetup API","title":"ReefBiodiversityAccountSetup.plotting.temporal_spread","text":"temporal_spread(f::Figure, data::YAXArray; axis_opts::Dict{Symbol,<:Any}=set_figure_defaults(Dict{Symbol,Any}()), opts::Dict{Symbol,<:Any}=set_figure_defaults(Dict{Symbol,Any}()))\n\nPlot median of a data set over time with colored bands representing the 1st, 2nd and 3rd quantiles.\n\nArguments\n\ndata : Must include a :timesteps dimension + 2 other dims\nopts : Plotting options   -plot_color : Color of lines and bands\naxis_opts : Additional options to pass to adjust Axis attributes   -ylabel : Label for the metric being plotted See: https://docs.makie.org/v0.19/api/index.html#Axis\nseries_opts : Additional options to pass to adjust Series attributes See: https://docs.makie.org/v0.19/api/index.html#series!\n\n\n\n\n\n","category":"method"}]
}
